import React, { useState } from "react";
import { Modal, Button, Input, Space, Typography, Tag, Divider } from "antd";

const { TextArea, Search } = Input;
const { Text } = Typography;

const CommonDialog = ({
  visible,
  title,
  contentType,
  onCancel,
  onSubmit,
  chips = [],
  onSearch,
}) => {
  const [selectedChips, setSelectedChips] = useState([]);
  const [inputValue, setInputValue] = useState("");

  const handleChipToggle = (chip) => {
    setSelectedChips((prev) =>
      prev.includes(chip) ? prev.filter((c) => c !== chip) : [...prev, chip]
    );
  };

  const renderFeedbackContent = () => (
    <>
      {/* Chips */}
      <Space wrap>
        {chips.map((chip) => (
          <Tag.CheckableTag
            key={chip}
            checked={selectedChips.includes(chip)}
            onChange={() => handleChipToggle(chip)}
          >
            {chip}
          </Tag.CheckableTag>
        ))}
      </Space>

      {/* Optional Input */}
      <TextArea
        placeholder="Optional..."
        value={inputValue}
        onChange={(e) => setInputValue(e.target.value)}
        style={{ marginTop: 12 }}
      />

      {/* Disclaimer */}
      <Text
        type="secondary"
        style={{ fontSize: 12, marginTop: 8, display: "block" }}
      >
        Submitted feedback will include this full conversation. Help improve
        tools. Learn more.
      </Text>
    </>
  );

  const renderSearchContent = () => (
    <>
      <Search
        placeholder="Search..."
        allowClear
        enterButton
        onSearch={onSearch}
        style={{ marginBottom: 12 }}
      />
      <Space>
        {["Last 7 days", "Last 15 days", "Last 30 days"].map((label) => (
          <Button key={label} onClick={() => onSearch(label)}>
            {label}
          </Button>
        ))}
      </Space>
    </>
  );

  return (
    <Modal
      title={
        <div style={{ display: "flex", justifyContent: "space-between" }}>
          <Text strong>{title}</Text>
          <Button type="text" onClick={onCancel}>
            âœ•
          </Button>
        </div>
      }
      open={visible}
      footer={
        <div style={{ display: "flex", justifyContent: "flex-end", gap: 8 }}>
          <Button onClick={onCancel}>Cancel</Button>
          <Button
            type="primary"
            onClick={() => onSubmit({ selectedChips, inputValue })}
          >
            Submit Feedback
          </Button>
        </div>
      }
      closable={false}
      width={500}
    >
      {contentType === "feedback"
        ? renderFeedbackContent()
        : renderSearchContent()}
    </Modal>
  );
};

export default CommonDialog;





 <CommonDialog
        visible={visible}
        title="Provide Feedback"
        // contentType="feedback"
        chips={[
          "Data accuracy concern",
          "Methodology issue",
          "Visual problem",
          "Missing context",
          "Not actionable",
          "Other reason",
        ]}
        onCancel={() => setVisible(false)}
        onSubmit={(data) => {
          console.log("Submitted:", data);
          setVisible(false);
        }}
        onSearch={(value) => console.log("Search:", value)}
      />
    </>
